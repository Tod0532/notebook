# AI 教练功能开发需求文档

## 一、功能核心目标

在现有 APP 中新增 AI 教练功能，基于用户设定的核心目标（减脂 / 增肌 / 塑形等）、基础信息及个性化限制，生成「饮食 + 训练」全维度的详细可执行计划，训练计划明确动作、组数、次数等关键信息，饮食计划明确食材、用量、做法，同时支持计划迭代优化及外接心率带实时监测运动状态，提升用户执行可行性与运动安全性。

## 二、产品功能详细要求

### 2.1 基础信息采集模块



| 功能点    | 详细要求                                                                       |
| ------ | -------------------------------------------------------------------------- |
| 目标采集   | 支持选择核心目标（减脂 / 增肌 / 塑形 / 维持体重 / 提升体能），可补充目标周期（7 天 / 30 天 / 90 天）、目标体重 / 体脂率 |
| 基础信息采集 | 必填：性别 / 年龄 / 身高 / 体重；选填：体脂率；运动基础（零基础 / 新手 / 有一定基础 / 资深）                    |
| 限制条件采集 | 饮食禁忌 / 过敏食材 / 素食标识；运动损伤 / 可运动时间段 / 每日可运动时长；是否拥有心率带（可选，关联心率监测功能）            |
| 偏好采集   | 饮食口味（辣 / 清淡 / 酸甜等）；喜欢 / 讨厌的运动类型；是否有器械（无 / 家用小器械 / 健身房器械）                   |

### 2.2 计划生成模块（核心）

#### 2.2.1 训练计划生成要求



| 维度   | 详细要求                                                                        |
| ---- | --------------------------------------------------------------------------- |
| 拆分逻辑 | 按日 / 周拆分，匹配用户每日可运动时长，明确每日训练主题（如胸肩训练 / 全身燃脂）                                 |
| 动作细节 | 每个动作需标注：名称 + 标准做法（文字 / 简图标注）+ 组数 + 每组次数 + 组间休息时间                            |
| 适配性  | 区分有无器械版本，动作难度适配用户运动基础；包含热身 + 主训练 + 拉伸完整流程，时长明确；支持结合心率数据动态调整训练强度（如心率过高时降低难度） |
| 灵活性  | 支持单个动作替换，AI 同步生成替换后对应的组数 / 次数调整                                             |

#### 2.2.2 饮食计划生成要求



| 维度   | 详细要求                                                         |
| ---- | ------------------------------------------------------------ |
| 拆分逻辑 | 按日 / 周拆分，匹配目标（减脂控热量缺口 / 增肌保蛋白摄入），明确三餐 + 加餐（可选）               |
| 食谱细节 | 每个菜品标注：食材名称 + 用量（克 / 份）+ 快手做法；标注每顿营养配比（可选：热量 / 蛋白 / 碳水 / 脂肪） |
| 适配性  | 满足饮食禁忌 / 偏好，提供同营养值食材替换方案；附加饮水要求 / 进食时间建议                     |
| 实用性  | 按周生成食材采购清单，方便一次性采购                                           |

### 2.3 计划展示与操作模块



| 功能点  | 详细要求                                                                 |
| ---- | -------------------------------------------------------------------- |
| 排版展示 | 分「训练」「饮食」「心率监测」tab 页，按日期罗列；关键信息（组数 / 用量 / 时长 / 心率数据）加粗突出；支持日 / 周视图切换 |
| 操作功能 | 支持计划收藏 / 截图 / 分享；提供计划微调入口（替换动作 / 菜品）；训练 / 饮食分别打卡；心率监测开关（可手动开启 / 关闭）  |
| 辅助展示 | 核心训练动作配图文 / 短视频示范（可选）；饮食计划标注食材替换方案；心率数据实时展示（当前心率 / 心率区间 / 平均心率）      |

### 2.4 计划迭代优化模块



| 功能点  | 详细要求                                                 |
| ---- | ---------------------------------------------------- |
| 反馈调整 | 支持用户反馈（动作太难 / 食材买不到 / 心率异常等），AI 一键重新生成适配计划           |
| 周期迭代 | 每 7/14 天提醒更新基础信息，AI 基于历史执行数据 + 心率监测数据 + 最新信息迭代下一阶段计划 |

### 2.5 辅助功能模块



| 功能点            | 详细要求                                                                            |
| -------------- | ------------------------------------------------------------------------------- |
| 提醒功能           | 自定义运动时间 / 进食时间提醒；心率异常提醒（如心率超出目标区间时弹窗 / 震动提醒）                                    |
| 数据统计           | 展示已执行天数 / 打卡率 / 累计运动时长；心率相关统计（单次运动心率曲线 / 平均心率 / 心率区间分布）（可选）                     |
| 隐私保护           | 用户基础信息 / 饮食运动数据 / 心率监测数据合规存储，不泄露                                                |
| **心率监测功能（新增）** |                                                                                 |
| 设备连接           | 支持蓝牙连接主流品牌心率带（如 Polar / Garmin / Wahoo 等）（华为/小米运手表），自动搜索 + 手动配对                           |
| 实时监测           | 运动中实时采集心率数据，每秒更新一次；显示当前心率数值、所属心率区间（热身 / 燃脂 / 有氧 / 无氧 / 极限）                      |
| 状态适配           | 基于目标自动设定心率区间（如减脂目标对应燃脂心率区间 60%-70% 最大心率，增肌目标对应有氧心率区间 70%-80% 最大心率）；支持手动调整心率区间阈值 |
| 动态调整           | 训练中若心率持续 30 秒超出目标区间，AI 自动推送调整建议（如「心率过高，建议降低动作强度或休息 1 分钟」「心率过低，建议增加动作幅度或加快节奏」）   |
| 数据记录           | 自动记录每次运动的心率数据（运动前 / 中 / 后心率变化曲线、平均心率、最大心率、各心率区间停留时长），关联对应训练计划存储                 |

## 三、开发落地核心要点

### 3.1 数据层搭建



| 数据库类型           | 核心内容                                                                 |
| --------------- | -------------------------------------------------------------------- |
| 运动动作库           | 按「目标 / 难度 / 器械类型」分类，录入：动作名称、标准做法、组数次数参考、示范素材（图文 / 视频）                |
| 饮食食材 / 食谱库      | 按「营养属性 / 食材类型 / 饮食偏好」分类，录入：食材营养数据、用量、做法、替换食材清单                       |
| 用户标签库           | 梳理标签：目标标签 / 基础信息标签 / 限制条件标签 / 偏好标签 / 设备标签（如「有心率带 + 减脂 + 新手」）         |
| **心率相关数据库（新增）** |                                                                      |
| 心率区间配置库         | 预设不同目标（减脂 / 增肌 / 提升体能）对应的心率区间计算规则（最大心率 = 220 - 年龄，按比例划分区间）；支持自定义区间存储 |
| 设备适配库           | 收录主流心率带品牌型号、蓝牙通信协议（如 BLE）、数据传输格式，确保兼容性                               |
| 心率数据存储库         | 设计数据结构：用户 ID、训练计划 ID、运动时间、心率数值、心率区间、数据采集时间戳                          |

### 3.2 算法层逻辑



| 逻辑类型           | 详细要求                                                                 |
| -------------- | -------------------------------------------------------------------- |
| 核心配比规则         | 减脂：女性基础代谢 ×1.2-300 大卡，男性基础代谢 ×1.3-300 大卡；增肌：每公斤体重摄入 1.8-2.2g 蛋白质     |
| 计划组合规则         | 训练计划：部位均衡 + 难度递进（新手每周不重复训练部位）；饮食计划：食材多样化 + 做法简单化                     |
| 迭代规则           | 基于用户反馈（动作难度 / 食材获取 / 心率异常）+ 执行数据（打卡率 / 完成度 / 心率曲线）调整下一轮计划参数          |
| **心率相关算法（新增）** |                                                                      |
| 心率区间计算         | 基于用户年龄、目标自动计算各区间阈值（如燃脂区间 = 最大心率 × 60% - 70%）；支持用户手动修改后实时生效           |
| 异常判断逻辑         | 设定异常条件：心率持续 30 秒 > 目标区间上限 × 1.1 或 目标区间下限 × 0.9；触发异常提醒及调整建议           |
| 动态调整算法         | 结合当前心率与训练进度，匹配对应调整方案（如心率过高时推荐降低动作负重 / 延长组间休息，心率过低时推荐增加动作次数 / 缩短休息时间） |

### 3.3 前端开发要求



| 开发维度 | 详细要求                                                                          |
| ---- | ----------------------------------------------------------------------------- |
| 表单设计 | 采集表单简洁，非必填项标注清晰，新增「心率带拥有情况」选项；设备连接页面提供蓝牙开启引导、配对状态提示                           |
| 页面适配 | 适配现有 APP 风格，支持 iOS / 安卓主流版本；新增「心率监测」tab 页，实时心率数据展示区域突出；训练页面悬浮显示心率状态，不遮挡核心操作按钮 |
| 交互设计 | 微调计划、打卡、反馈等操作一键触发；心率监测开关操作简单；异常心率提醒支持「忽略」「立即调整」选项；心率曲线支持缩放查看细节                |
| 性能要求 | 心率数据接收与展示延迟 ≤ 1 秒；页面滑动流畅，无卡顿；设备连接过程中不影响其他功能使用                                 |

### 3.4 后端开发要求



| 开发维度  | 详细要求                                                                    |
| ----- | ----------------------------------------------------------------------- |
| 接口开发  | 实现「信息采集 - AI 生成 - 计划展示 - 微调 - 反馈 - 迭代」全流程接口；新增心率带连接接口、心率数据采集接口、心率异常判断接口 |
| AI 调用 | 封装专属提示词模板，明确计划生成格式 / 细节要求；新增心率数据关联逻辑，AI 基于心率数据生成调整建议及迭代计划               |
| 性能优化  | AI 生成计划速度≤10 秒；心率数据存储与查询响应速度≤500ms；支持高并发访问，无卡顿；用户数据（含心率数据）持久化存储         |
| 设备兼容  | 适配主流心率带蓝牙通信协议（BLE）；支持自动重连机制（设备断开后 10 秒内自动搜索重连）                          |

### 3.5 测试与上线要求



| 阶段   | 详细要求                                                                            |
| ---- | ------------------------------------------------------------------------------- |
| 功能测试 | 验证 AI 计划准确性、合理性；测试心率带连接兼容性（覆盖 5 款以上主流品牌）；验证心率数据采集实时性、异常判断准确性；测试不同用户画像下心率调整逻辑有效性 |
| 体验测试 | 模拟用户实际运动场景（如室内训练 / 户外训练），验证心率监测稳定性；测试设备连接便捷性、页面交互流畅性                            |
| 灰度上线 | 小范围开放功能，重点收集心率监测相关反馈（连接稳定性、数据准确性、调整建议实用性）；优化计划逻辑 / 页面交互                         |
| 合规要求 | 计划标注免责声明；心率数据按隐私保护法规存储，明确告知用户数据用途；新增心率监测功能使用说明（如设备适配型号、佩戴要求）                    |

## 四、交付物清单



1. 运动动作库、饮食食材 / 食谱库、用户标签库、心率相关数据库初始化数据

2. AI 计划生成算法逻辑文档（含心率数据关联逻辑）

3. 前端页面设计稿（采集页 / 计划展示页 / 打卡页 / 心率监测页等）

4. 全流程接口文档（含心率带连接接口、心率数据采集接口等）

5. 功能测试报告（含心率监测功能专项测试报告）+ 灰度上线反馈优化方案

6. 设备兼容测试报告（主流心率带 运动手表适配测试结果）
